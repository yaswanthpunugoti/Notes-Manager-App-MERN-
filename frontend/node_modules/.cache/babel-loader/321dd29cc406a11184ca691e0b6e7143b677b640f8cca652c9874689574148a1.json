{"ast":null,"code":"import React,{useEffect,useState}from'react';import api from'../api/axios';import NoteItem from'../components/NoteItem';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function AdminPanel(){const[users,setUsers]=useState([]);const[notes,setNotes]=useState([]);const[err,setErr]=useState('');const fetchUsers=async()=>{try{const res=await api.get('/admin/users');setUsers(res.data);}catch(e){setErr('Could not load users (admin only)');}};const fetchNotes=async()=>{try{const res=await api.get('/admin/notes');setNotes(res.data);}catch(e){setErr('Could not load notes (admin only)');}};useEffect(()=>{fetchUsers();fetchNotes();},[]);const deleteNote=async id=>{if(!window.confirm('Delete this note as admin?'))return;try{await api.delete(\"/admin/notes/\".concat(id));setNotes(prev=>prev.filter(n=>n._id!==id));}catch(e){setErr('Admin delete failed');}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Admin Panel\"}),err&&/*#__PURE__*/_jsx(\"p\",{className:\"error\",children:err}),/*#__PURE__*/_jsxs(\"section\",{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Registered Users\"}),users.length===0?/*#__PURE__*/_jsx(\"p\",{children:\"No users found.\"}):/*#__PURE__*/_jsx(\"ul\",{children:users.map(u=>/*#__PURE__*/_jsxs(\"li\",{children:[u.name||'-',\" \\u2014 \",u.email,\" \\u2014 \",u.role]},u._id))})]}),/*#__PURE__*/_jsxs(\"section\",{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"All Notes\"}),notes.length===0?/*#__PURE__*/_jsx(\"p\",{children:\"No notes found.\"}):notes.map(n=>{var _n$user;return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:n.title}),\" by \",((_n$user=n.user)===null||_n$user===void 0?void 0:_n$user.email)||'unknown']}),/*#__PURE__*/_jsx(\"p\",{children:n.description}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>deleteNote(n._id),children:\"Delete note\"}),/*#__PURE__*/_jsx(\"hr\",{})]},n._id);})]})]});}","map":{"version":3,"names":["React","useEffect","useState","api","NoteItem","jsx","_jsx","jsxs","_jsxs","AdminPanel","users","setUsers","notes","setNotes","err","setErr","fetchUsers","res","get","data","e","fetchNotes","deleteNote","id","window","confirm","delete","concat","prev","filter","n","_id","children","className","length","map","u","name","email","role","_n$user","title","user","description","onClick"],"sources":["C:/Users/yaswanthpunu/Downloads/notes-manager-fixed/frontend/src/pages/AdminPanel.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport api from '../api/axios';\nimport NoteItem from '../components/NoteItem';\n\nexport default function AdminPanel(){\n  const [users, setUsers] = useState([]);\n  const [notes, setNotes] = useState([]);\n  const [err, setErr] = useState('');\n\n  const fetchUsers = async () => {\n    try {\n      const res = await api.get('/admin/users');\n      setUsers(res.data);\n    } catch (e) { setErr('Could not load users (admin only)'); }\n  };\n  const fetchNotes = async () => {\n    try {\n      const res = await api.get('/admin/notes');\n      setNotes(res.data);\n    } catch (e) { setErr('Could not load notes (admin only)'); }\n  };\n\n  useEffect(()=>{ fetchUsers(); fetchNotes(); }, []);\n\n  const deleteNote = async (id) => {\n    if (!window.confirm('Delete this note as admin?')) return;\n    try {\n      await api.delete(`/admin/notes/${id}`);\n      setNotes(prev => prev.filter(n => n._id !== id));\n    } catch (e) { setErr('Admin delete failed'); }\n  };\n\n  return (\n    <div>\n      <h2>Admin Panel</h2>\n      {err && <p className=\"error\">{err}</p>}\n      <section>\n        <h3>Registered Users</h3>\n        {users.length===0 ? <p>No users found.</p> : (\n          <ul>\n            {users.map(u=> <li key={u._id}>{u.name || '-'} — {u.email} — {u.role}</li>)}\n          </ul>\n        )}\n      </section>\n\n      <section>\n        <h3>All Notes</h3>\n        {notes.length===0 ? <p>No notes found.</p> : notes.map(n=> (\n          <div key={n._id}>\n            <p><strong>{n.title}</strong> by {n.user?.email || 'unknown'}</p>\n            <p>{n.description}</p>\n            <button onClick={()=>deleteNote(n._id)}>Delete note</button>\n            <hr/>\n          </div>\n        ))}\n      </section>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}